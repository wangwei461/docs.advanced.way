(window.webpackJsonp=window.webpackJsonp||[]).push([[18],{391:function(t,e,n){t.exports=n.p+"assets/img/lvm.278ce816.png"},495:function(t,e,n){"use strict";n.r(e);var a=n(25),v=Object(a.a)({},(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("p",[a("strong",[t._v("PV(Physical Volume) - 物理卷")])]),t._v(" "),a("p",[t._v("物理卷在逻辑卷管理中处于最底层，它可以是实际物理硬盘上的分区，也可以是整个物理硬盘，也可以是raid设备")]),t._v(" "),a("p",[a("strong",[t._v("VG(Volume Group) - 卷组")])]),t._v(" "),a("p",[t._v("卷组建立在物理卷之上，一个卷组中至少要包括一个物理卷，在卷组建立之后可动态添加物理卷到卷组中。一个逻辑卷管理系统工程中可以只有一个卷组，也可以拥有多个卷组")]),t._v(" "),a("p",[a("strong",[t._v("LV(Logical Volume) - 逻辑卷")])]),t._v(" "),a("p",[t._v("逻辑卷建立在卷组之上，卷组中的未分配空间可以用于建立新的逻辑卷，逻辑卷建立后可以动态地扩展和缩小空间。系统中的多个逻辑卷可以属于同一个卷组，也可以属于不同的多个卷组")]),t._v(" "),a("p",[a("img",{attrs:{src:n(391),alt:"img"}})]),t._v(" "),a("p",[a("strong",[t._v("创建LVM步骤")])]),t._v(" "),a("ol",[a("li",[t._v("添加新硬盘；")]),t._v(" "),a("li",[t._v("给新硬盘创建分区；")]),t._v(" "),a("li",[t._v("创建PV；")]),t._v(" "),a("li",[t._v("创建VG；")]),t._v(" "),a("li",[t._v("创建LV；")]),t._v(" "),a("li",[t._v("格式化LV；")]),t._v(" "),a("li",[t._v("挂载LV到指定目录；")])]),t._v(" "),a("p",[a("strong",[t._v("扩容步骤")])]),t._v(" "),a("p",[t._v("LV的扩容")]),t._v(" "),a("ul",[a("li",[t._v("(1) 使用VG的Free空间，对LV扩容；")]),t._v(" "),a("li",[t._v("(2) 完成后需要在对文件系统扩容；")])]),t._v(" "),a("p",[t._v("VG的扩容")]),t._v(" "),a("ul",[a("li",[t._v("方式1： 通过增加PV来实现")]),t._v(" "),a("li",[t._v("方式2： 通过扩展raid（磁盘阵列）设备的容量来间接对VG扩容")])]),t._v(" "),a("p",[a("strong",[t._v("LVM的缩减")])]),t._v(" "),a("ul",[a("li",[t._v("\\1. LV的缩减")]),t._v(" "),a("li",[t._v("\\2. VG的缩减")])]),t._v(" "),a("h3",{attrs:{id:"创建lvm"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#创建lvm"}},[t._v("#")]),t._v(" 创建LVM")]),t._v(" "),a("p",[a("strong",[t._v("创建系统分区")])]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("fdisk /dev/vdb\n欢迎使用 fdisk (util-linux 2.23.2)。\n\n更改将停留在内存中，直到您决定将更改写入磁盘。\n使用写入命令前请三思。\n\nDevice does not contain a recognized partition table\n使用磁盘标识符 0x09261bf7 创建新的 DOS 磁盘标签。\n\n命令(输入 m 获取帮助)：n    #创建分区\nPartition type:\n   p   primary (0 primary, 0 extended, 4 free)\n   e   extended\nSelect (default p): p    #创建主分区\n分区号 (1-4，默认 1)：1     #选择1\n起始 扇区 (2048-629145599，默认为 2048)： #回车\n将使用默认值 2048\nLast 扇区, +扇区 or +size{K,M,G} (2048-629145599，默认为 629145599)：  #回车\n将使用默认值 629145599\n分区 1 已设置为 Linux 类型，大小设为 300 GiB\n\n命令(输入 m 获取帮助)：p  #查看创建的主分区\n\n磁盘 /dev/vdb：322.1 GB, 322122547200 字节，629145600 个扇区\nUnits = 扇区 of 1 * 512 = 512 bytes\n扇区大小(逻辑/物理)：512 字节 / 512 字节\nI/O 大小(最小/最佳)：512 字节 / 512 字节\n磁盘标签类型：dos\n磁盘标识符：0x09261bf7\n\n   设备 Boot      Start         End      Blocks   Id  System\n/dev/vdb1            2048   629145599   314571776   83  Linux    #系统默认为83，即：Linux\n\n命令(输入 m 获取帮助)：t          #更改分区格式\n已选择分区 1  \nHex 代码(输入 L 列出所有代码)：8e       #8e为Linux LVM格式\n已将分区“Linux”的类型更改为“Linux LVM”\n\n命令(输入 m 获取帮助)：p\n\n磁盘 /dev/vdb：322.1 GB, 322122547200 字节，629145600 个扇区\nUnits = 扇区 of 1 * 512 = 512 bytes\n扇区大小(逻辑/物理)：512 字节 / 512 字节\nI/O 大小(最小/最佳)：512 字节 / 512 字节\n磁盘标签类型：dos\n磁盘标识符：0x09261bf7\n\n   设备 Boot      Start         End      Blocks   Id  System\n/dev/vdb1            2048   629145599   314571776   8e  Linux LVM  #已改成8e\n\n命令(输入 m 获取帮助)：w #保存\nThe partition table has been altered!\n")])])]),a("p",[a("strong",[t._v("创建PV")])]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v('[root@VM_8_76_centos ~]# pvcreate /dev/vdb1  \n  Physical volume "/dev/vdb1" successfully created.\n')])])]),a("p",[a("strong",[t._v("创建VG")])]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v('[root@VM_8_76_centos ~]# vgcreate datavg  /dev/vdb1    #创建一个名为datavg的Volume Group \n  Volume group "datavg" successfully created\n')])])]),a("p",[a("strong",[t._v("创建LV")])]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v('[root@VM_8_76_centos ~]# lvcreate -l 100%free -n datalv  datavg    \n  Logical volume "datalv" created.\n')])])]),a("p",[a("strong",[t._v("格式化LV")])]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v(" mkfs.ext4 /dev/datavg/datalv \n")])])]),a("p",[a("strong",[t._v("挂载LV")])]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("mount /dev/datavg/datalv  /data/ \n")])])])])}),[],!1,null,null,null);e.default=v.exports}}]);